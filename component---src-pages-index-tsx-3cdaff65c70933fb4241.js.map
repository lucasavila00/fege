{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es7.promise.finally.js","webpack:///./node_modules/gatsby-plugin-firebase/src/firebase.js","webpack:///./node_modules/gatsby-plugin-firebase/index.js","webpack:///./src/components/fcm.tsx","webpack:///./src/pages/index.tsx"],"names":["$export","core","global","speciesConstructor","promiseResolve","P","R","onFinally","C","this","Promise","isFunction","then","x","e","firebase","apps","length","initializeApp","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","defaultRegistration","token","registered","CustomCheckBox","checked","commonStyle","width","height","borderRadius","borderStyle","borderWidth","borderColor","getTheme","palette","themePrimary","checkedStyle","backgroundColor","display","justifyContent","alignItems","style","fill","white","xmlns","viewBox","fill-rule","d","Fcm","useState","loading","setLoading","setRegisteredTrue","console","log","setRegistered","registration","localStorage","setItem","JSON","stringify","useEffect","window","parse","getItem","error","setError","requestPermission","setRequestPermission","messaging","onMessage","payload","onTokenRefresh","getToken","refreshedToken","catch","err","onRegisterClub","currentToken","finally","Stack","tokens","childrenGap","paddingBottom","paddingTop","horizontalAlign","Text","variant","color","PrimaryButton","onClick","Notification","permission","cursor","horizontal","verticalAlign","themeLight","themeDarker","Index","data","title","src","file","childImageSharp","fluid","href","showPlay","to","sconfig","instagram","facebook"],"mappings":"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","file":"component---src-pages-index-tsx-3cdaff65c70933fb4241.js","sourcesContent":["// https://github.com/tc39/proposal-promise-finally\n'use strict';\nvar $export = require('./_export');\nvar core = require('./_core');\nvar global = require('./_global');\nvar speciesConstructor = require('./_species-constructor');\nvar promiseResolve = require('./_promise-resolve');\n\n$export($export.P + $export.R, 'Promise', { 'finally': function (onFinally) {\n  var C = speciesConstructor(this, core.Promise || global.Promise);\n  var isFunction = typeof onFinally == 'function';\n  return this.then(\n    isFunction ? function (x) {\n      return promiseResolve(C, onFinally()).then(function () { return x; });\n    } : onFinally,\n    isFunction ? function (e) {\n      return promiseResolve(C, onFinally()).then(function () { throw e; });\n    } : onFinally\n  );\n} });\n","import firebase from \"firebase/app\";\n\nif (!firebase.apps.length) {\n  firebase.initializeApp({\n    apiKey: process.env.FIREBASE_API_KEY,\n    authDomain: process.env.FIREBASE_AUTH_DOMAIN,\n    databaseURL: process.env.FIREBASE_DATABASE_URL,\n    projectId: process.env.FIREBASE_PROJECT_ID,\n    storageBucket: process.env.FIREBASE_STORAGE_BUCKET,\n    messagingSenderId: process.env.FIREBASE_MESSAGING_SENDER_ID,\n    appId: process.env.FIREBASE_APP_ID,\n    measurementId: process.env.FIREBASE_MEASUREMENT_ID\n  });\n}\n\nexport default firebase;\n","import firebase from \"./src/firebase\";\n\nexport default firebase;\n","import * as React from \"react\";\nimport { Stack } from \"office-ui-fabric-react/lib/components/Stack\";\nimport { Text } from \"office-ui-fabric-react/lib/components/Text\";\n// import { ProgressIndicator } from \"office-ui-fabric-react/lib/ProgressIndicator\";\nimport { getTheme } from \"office-ui-fabric-react/lib/Styling\";\n// import { PrimaryButton } from \"office-ui-fabric-react/lib/Button\";\nimport { Checkbox } from \"office-ui-fabric-react/lib/Checkbox\";\nimport firebase from \"gatsby-plugin-firebase\";\nimport { useEffect, useState } from \"react\";\nimport { PrimaryButton } from \"office-ui-fabric-react/lib/components/Button\";\nconst defaultRegistration = {\n  token: null as string | null,\n  registered: false,\n};\n\nconst CustomCheckBox: React.FunctionComponent<{\n  checked: boolean;\n}> = ({ checked }) => {\n  const commonStyle: React.CSSProperties = {\n    width: 20,\n    height: 20,\n    borderRadius: 4,\n    borderStyle: \"solid\",\n    borderWidth: 2,\n    borderColor: getTheme().palette.themePrimary,\n  };\n  if (checked) {\n    const checkedStyle: React.CSSProperties = {\n      backgroundColor: getTheme().palette.themePrimary,\n      display: \"flex\",\n      justifyContent: \"center\",\n      alignItems: \"center\",\n    };\n    return (\n      <div style={{ ...commonStyle, ...checkedStyle }}>\n        <svg\n          fill={getTheme().palette.white}\n          xmlns=\"http://www.w3.org/2000/svg\"\n          viewBox=\"0 0 24 24\"\n          width=\"16px\"\n          height=\"16px\"\n        >\n          <path\n            fill-rule=\"evenodd\"\n            d=\"M 22.59375 3.5 L 8.0625 18.1875 L 1.40625 11.5625 L 0 13 L 8.0625 21 L 24 4.9375 Z\"\n          />\n        </svg>\n      </div>\n    );\n  } else {\n    return <div style={{ ...commonStyle }}></div>;\n  }\n};\nexport const Fcm: React.FunctionComponent = () => {\n  const [loading, setLoading] = useState(false);\n  const setRegisteredTrue = (token: string) => {\n    console.log({ token });\n    setRegistered(true);\n    // salva no localstorage\n    const registration: typeof defaultRegistration = {\n      token,\n      registered: true,\n    };\n    localStorage.setItem(\n      \"registration\",\n      JSON.stringify(registration),\n    );\n  };\n  const getRegistration = (): typeof defaultRegistration => {\n    if (typeof window == \"undefined\") {\n      return defaultRegistration;\n    }\n    const stored =\n      JSON.parse(\n        localStorage.getItem(\"registration\") ?? \"null\",\n      ) ?? defaultRegistration;\n\n    return stored;\n  };\n  const [registered, setRegistered] = useState(false);\n  useEffect(() => {\n    setRegistered(getRegistration().registered);\n  });\n  const [error, setError] = useState(false);\n  const [\n    requestPermission,\n    setRequestPermission,\n  ] = useState(false);\n  useEffect(() => {\n    const messaging = firebase.messaging();\n    messaging.onMessage((payload) => {\n      console.log(\"Message received. \", payload);\n      // ...\n    });\n    messaging.onTokenRefresh(() => {\n      messaging\n        .getToken()\n        .then((refreshedToken) => {\n          console.log(\"Token refreshed.\");\n          // Indicate that the new Instance ID token has not yet been sent to the\n          // app server.\n          // setTokenSentToServer(false);\n          // // Send Instance ID token to app server.\n          // sendTokenToServer(refreshedToken);\n          // ...\n          setRegisteredTrue(refreshedToken);\n        })\n        .catch((err) => {\n          console.log(\n            \"Unable to retrieve refreshed token \",\n            err,\n          );\n          // showToken('Unable to retrieve refreshed token ', err);\n          setError(true);\n        });\n    });\n  }, []);\n  const requestPermissionCb = () => {\n    console.log(\"Requesting permission...\");\n    // [START request_permission]\n    Notification.requestPermission().then((permission) => {\n      if (permission === \"granted\") {\n        // In many cases once an app has been granted notification permission,\n        // it should update its UI reflecting this.\n        console.log(\"Notification permission granted.\");\n        setRequestPermission(false);\n        setError(false);\n        onRegisterClub();\n      } else {\n        setRequestPermission(false);\n        setError(true);\n        console.log(\"Unable to get permission to notify.\");\n      }\n    });\n    // [END request_permission]\n  };\n  const onRegisterClub = () => {\n    setLoading(true);\n    const messaging = firebase.messaging();\n\n    messaging\n      .getToken()\n      .then((currentToken) => {\n        if (currentToken) {\n          // sendTokenToServer(currentToken);\n          // updateUIForPushEnabled(currentToken);\n          setRegisteredTrue(currentToken);\n        } else {\n          // Show permission request.\n          console.log(\n            \"No Instance ID token available. Request permission to generate one.\",\n          );\n          setRequestPermission(true);\n          // Show permission UI.\n          // updateUIForPushPermissionRequired();\n          // setTokenSentToServer(false);\n        }\n      })\n      .catch((err) => {\n        console.log(\n          \"An error occurred while retrieving token. \",\n          err,\n        );\n        setError(true);\n        // showToken('Error retrieving Instance ID token. ', err);\n        // setTokenSentToServer(false);\n      })\n      .finally(() => {\n        setLoading(false);\n      });\n  };\n  return (\n    <Stack\n      tokens={{ childrenGap: \"m\" }}\n      style={{ paddingBottom: 8, paddingTop: 8 }}\n      horizontalAlign=\"center\"\n    >\n      <Text\n        variant={\"superLarge\"}\n        style={{\n          color: getTheme().palette.themePrimary,\n        }}\n      >\n        Novidade!\n      </Text>\n      <Text\n        variant={\"medium\"}\n        style={{\n          color: getTheme().palette.themePrimary,\n        }}\n      >\n        <b>Clube de Descontos:</b> Que tal ganhar brindes\n        <b> grátis</b> da Festa Estranha, participar de{\" \"}\n        <b>sorteios</b> e ainda ganhar <b>descontos</b> nos\n        ingressos?\n      </Text>\n      {requestPermission && (\n        <Stack\n          style={{ width: \"100%\" }}\n          tokens={{ childrenGap: \"m\" }}\n        >\n          <Text\n            variant={\"medium\"}\n            style={{\n              color: getTheme().palette.themePrimary,\n            }}\n          >\n            <b>Atenção: </b> Ative a permissão para receber\n            notificações!\n          </Text>\n          <PrimaryButton\n            style={{ width: \"100%\" }}\n            onClick={requestPermissionCb}\n          >\n            Ativar notificações\n          </PrimaryButton>\n        </Stack>\n      )}\n      {error && (\n        <Text\n          variant={\"medium\"}\n          style={{\n            color: \"red\",\n          }}\n        >\n          <b>Erro: </b> Não foi possível ativar as\n          notificações.\n        </Text>\n      )}\n      <Stack\n        style={{ width: \"100%\", cursor: \"pointer\" }}\n        onClick={onRegisterClub}\n        horizontal={true}\n        tokens={{ childrenGap: \"s1\" }}\n        verticalAlign=\"center\"\n      >\n        <CustomCheckBox checked={registered} />\n        <Text\n          variant=\"large\"\n          style={{\n            color: loading\n              ? getTheme().palette.themeLight\n              : getTheme().palette.themeDarker,\n          }}\n        >\n          Participar do Clube de Descontos\n        </Text>\n      </Stack>\n    </Stack>\n  );\n};\n","import * as React from \"react\";\nimport { Layout } from \"../components/layout\";\nimport { Stack } from \"office-ui-fabric-react/lib/components/Stack\";\nimport { Text } from \"office-ui-fabric-react/lib/components/Text\";\n// import { ProgressIndicator } from \"office-ui-fabric-react/lib/ProgressIndicator\";\nimport {\n  OutboundBtn,\n  InboundBtn,\n  ImagePreviewBtn,\n} from \"../components/btns\";\nimport { sconfig } from \"../components/config\";\nimport { getTheme } from \"office-ui-fabric-react/lib/Styling\";\nimport { useStaticQuery, graphql } from \"gatsby\";\n// import { PrimaryButton } from \"office-ui-fabric-react/lib/Button\";\nimport { Fcm } from \"../components/fcm\";\n\nconst Index: React.FunctionComponent = () => {\n  const data = useStaticQuery(graphql`\n    query {\n      file(relativePath: { eq: \"video1.jpg\" }) {\n        childImageSharp {\n          # Specify a fluid image and fragment\n          # The default maxWidth is 800 pixels\n          fluid {\n            ...GatsbyImageSharpFluid\n          }\n        }\n      }\n    }\n  `);\n\n  return (\n    <Layout title=\"Festa Estranha com Gente Esquisita\">\n      <Stack tokens={{ childrenGap: \"m\" }}>\n        <Fcm />\n        {/* <ProgressIndicator\n          label=\"Primeiro Lote (R$30)\"\n          description=\"78% vendido\"\n          percentComplete={0.78}\n        />\n        <ProgressIndicator\n          label=\"Ingressos totais\"\n          description=\"1365/2000\"\n          percentComplete={1365 / 2000}\n        /> */}\n        {/* <OutboundBtn\n          title=\"Compre Online\"\n          href={sconfig.online}\n        />\n        <InboundBtn to=\"/pontos\" title=\"Pontos de Vendas\" /> */}\n        <ImagePreviewBtn\n          src={data.file.childImageSharp.fluid}\n          title=\"Assista ao After Movie\"\n          href=\"https://www.youtube.com/watch?v=oXCAHbPwR2s\"\n          showPlay={true}\n        />\n        {/* <OutboundBtn\n          title=\"Confirme Presença no Evento\"\n          href={sconfig.evento}\n        /> */}\n        <InboundBtn\n          to=\"/contato\"\n          title=\"Entre em Contato\"\n        />\n        <OutboundBtn\n          title=\"Siga no Instagram\"\n          href={sconfig.instagram}\n        />\n        <OutboundBtn\n          title=\"Curta no Facebook\"\n          href={sconfig.facebook}\n        />\n        <Stack\n          tokens={{ childrenGap: \"m\" }}\n          style={{ paddingTop: 16 }}\n          horizontalAlign=\"center\"\n        >\n          <Text\n            variant={\"large\"}\n            style={{\n              color: getTheme().palette.themePrimary,\n            }}\n          >\n            Patrocínio\n          </Text>\n          <OutboundBtn\n            title=\"Cepatech @cepatechvicosa\"\n            href=\"https://www.instagram.com/cepatechvicosa/\"\n          />\n        </Stack>\n      </Stack>\n    </Layout>\n  );\n};\n\nexport default Index;\n"],"sourceRoot":""}